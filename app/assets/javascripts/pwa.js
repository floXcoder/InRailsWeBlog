'use strict';

if (js_environment.NODE_ENV === 'production' && !window.seoMode) {
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            // SW is generated by Workbox webpack plugin
            navigator.serviceWorker.register('/service-worker.js')
                .then((registration) => {
                    console.info('Service worker registered:', registration);
                })
                .catch((registrationError) => {
                    console.info('Service worker registration failed: ', registrationError);
                });
        });
    }
}

// // Install prompt
// let deferredInstallPrompt = null;
// const installButton = document.getElementById('install-button');
// installButton.addEventListener('click', installPWA);
//
// window.addEventListener('beforeinstallprompt', saveBeforeInstallPromptEvent);
//
// function saveBeforeInstallPromptEvent(event) {
//     deferredInstallPrompt = event;
//     installButton.removeAttribute('hidden');
// }
//
// function installPWA(event) {
//     deferredInstallPrompt.prompt();
//     event.srcElement.setAttribute('hidden', true);
//
//     deferredInstallPrompt.userChoice
//         .then((choice) => {
//             if (choice.outcome === 'accepted') {
//                 console.info('User accepted the A2HS prompt', choice);
//             } else {
//                 console.info('User dismissed the A2HS prompt', choice);
//             }
//             deferredInstallPrompt = null;
//         });
// }
//
// window.addEventListener('appinstalled', logAppInstalled);
//
// function logAppInstalled(event) {
//     console.info('GinkoNote App was installed.', event);
// }
